#!/bin/bash

set -euo pipefail

APP_NAME="HARDN-XDR"
VERSION="2.0.0"

MAIN_SCRIPT="/usr/lib/hardn-xdr/src/setup/hardn-main.sh"

show_help() {
    cat <<EOF
$APP_NAME $VERSION

Usage: $(basename "$0") [command]

Commands:
  start         Run hardn-xdr as a service
  stop          Stop hardn-xdr service
  status        Show hardn-xdr status
  help          Show this help message

Example:
  sudo $(basename "$0") start
EOF
}

stop_service() {
    HARDN_STATUS "info" "Stopping HARDN-XDR service..."
    systemctl stop hardn-xdr && \
        HARDN_STATUS "pass" "Service stopped." || \
        HARDN_STATUS "warning" "Service not running or not found."
}

status_service() {
    HARDN_STATUS "info" "Checking HARDN-XDR service status..."
    systemctl status hardn-xdr --no-pager
}

start_service() {
    HARDN_STATUS "info" "Starting HARDN-XDR service..."
    systemctl start hardn-xdr && \
        HARDN_STATUS "pass" "Service started." || \
        HARDN_STATUS "error" "Failed to start service."
}


if [ "$(id -u)" -ne 0 ]; then
    echo "This script must be run as root. Please use sudo."
    exit 1
fi

case "${1:-}" in
    start)
        start_service
        ;;
    stop)
        echo "Stop command is not yet implemented."
        ;;
    status)
        echo "Status command is not yet implemented."
        ;;
    help|-h|--help|"")
        show_help
        ;;
    *)
        echo "Unknown command: $1"
        show_help
        exit 1
        ;;
esac
